<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Create a download button  - Flutter </title>
  <link rel="shortcut icon" href="/images/favicon.png">

  <!-- Google Optimize -->
  <script src="https://www.googleoptimize.com/optimize.js?id=GTM-MPZP6R8"></script>
  <!-- End Google Optimize -->

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-ND4LWWZ');</script>
  <!-- End Google Tag Manager -->

  
  <meta name="description" content="How to implement a download button.">
  <meta name="keywords" content=" ">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@flutterdev">

  <meta property="og:title" content="Create a download button">
  <meta property="og:url" content="https://flutter.dev/docs/cookbook/effects/download-button">
  <meta property="og:description" content="How to implement a download button.">
  
  <meta property="og:image" content="https://flutter.dev/images/flutter-logo-sharing.png">

  <link href="https://fonts.googleapis.com/css?family=Google+Sans:400,500|Roboto:300,400,500|Roboto+Mono:400,700|Material+Icons" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/assets/main-5179236d2a521f0d8c964446a1eaa9bee448793c298286381d5cbdc3f6776229.css">
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
  <script src="/assets/main-3d1fe020941b4eb18d313f0eb6a8ff9fd170a0b3ed6913d333d804fec0136545.js" type="text/javascript"></script>
  <script defer src="https://dartpad.dev/inject_embed.dart.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-67589403-1', 'auto');
    ga('send', 'pageview');
  </script>

  <meta name="google-site-verification" content="HFqxhSbf9YA_0rBglNLzDiWnrHiK_w4cqDh2YD2GEY4" />
  <meta name="google-site-verification" content="Zom-prnFykfYycmI_nzRWYx5r6Z9OwR-yEsgElRz_Ug" />
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-ND4LWWZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<div id="overlay-under-drawer"></div>

    <header class="site-header">
  <nav class="navbar navbar-expand-md justify-content-start justify-content-md-between">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <i class="material-icons">menu</i>
    </button>

    <a class="navbar-brand" href="/">
      <img alt="Flutter logo" height="37" width="129" class="align-middle" src="/assets/flutter-lockup-1caf6476beed76adec3c477586da54de6b552b2f42108ec5bc68dc63bae2df75.png">
    </a>

    <div class="collapse navbar-collapse flex-grow-0" id="navbarSupportedContent">
      <div class="site-header__sheet-bg" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"></div>
      <div class="site-header__sheet">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link active" href="/docs">Docs</a>
          </li>
          <div class="site-sidebar site-sidebar--header d-md-none">
            <ul class="nav flex-column"><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-1" role="button"
        aria-expanded="false" aria-controls="sidenav-1"
      >Get started</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-1">
        <li class="nav-item">
    <a class="nav-link" href="/docs/get-started/install">1. Install</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/editor">2. Set up an editor</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/test-drive">3. Test drive</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/codelab">4. Write your first app</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/learn-more">5. Learn more</a>
  </li><div class="dropdown-divider"></div><li class="nav-item">
    <a class="nav-link collapsable"
      data-toggle="collapse" data-target="#sidenav-1-7"
      href="#sidenav-1-7" role="button"
      aria-expanded="true" aria-controls="sidenav-1-7"
    >From another platform?
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-1-7">
      <li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/android-devs">Flutter for Android devs</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/ios-devs">Flutter for iOS devs</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/react-native-devs">Flutter for React Native devs</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/web-devs">Flutter for web devs</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/xamarin-forms-devs">Flutter for Xamarin.Forms devs</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/declarative">Introduction to declarative UI</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="https://dart.dev/overview" target="_blank" rel="noopener">Dart language overview<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/web">Building a web app</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link active" data-toggle="collapse" href="#sidenav-2" role="button"
        aria-expanded="true" aria-controls="sidenav-2"
      >Samples & tutorials</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-2">
        <li class="nav-item">
    <a class="nav-link" href="https://gallery.flutter.dev" target="_blank" rel="noopener">Flutter Gallery [running app]<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://github.com/flutter/gallery" target="_blank" rel="noopener">Flutter Gallery [repo]<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://flutter.github.io/samples/" target="_blank" rel="noopener">Sample apps on GitHub<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link active" href="/docs/cookbook">Cookbook</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/codelabs">Codelabs</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/reference/tutorials">Tutorials</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link " data-toggle="collapse" href="#sidenav-3" role="button"
        aria-expanded="true" aria-controls="sidenav-3"
      >Development</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-3">
        <li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-1"
      href="/docs/development/ui" role="button"
      aria-expanded="false" aria-controls="sidenav-3-1"
    >User interface
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-1">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/widgets-intro">Introduction to widgets</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-1-2"
      href="/docs/development/ui/layout" role="button"
      aria-expanded="false" aria-controls="sidenav-3-1-2"
    >Building layouts
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-1-2">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/layout">Layouts in Flutter</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/layout/tutorial">Tutorial</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/layout/adaptive-responsive">Creating adaptive and responsive apps</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/layout/constraints">Understanding constraints [NEW]</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/layout/box-constraints">Box constraints</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/interactive">Adding interactivity</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/assets-and-images">Assets and images</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-1-5"
      href="/docs/development/ui/navigation" role="button"
      aria-expanded="false" aria-controls="sidenav-3-1-5"
    >Navigation & routing
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-1-5">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/navigation">Navigation in Flutter</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/navigation/deep-linking">Deep linking</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/navigation/url-strategies">URL strategies</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-1-6"
      href="/docs/development/ui/animations" role="button"
      aria-expanded="false" aria-controls="sidenav-3-1-6"
    >Animations
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-1-6">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations">Introduction</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/overview">Overview</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/tutorial">Tutorial</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/implicit-animations">Implicit animations</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/hero-animations">Hero animations</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/staggered-animations">Staggered animations</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-1-7"
      href="/docs/development/ui/advanced" role="button"
      aria-expanded="false" aria-controls="sidenav-3-1-7"
    >Advanced UI
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-1-7">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/advanced/slivers">Slivers</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/advanced/gestures">Gestures</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/advanced/splash-screen">Splash screens</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/widgets">Widget catalog</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-2"
      href="/docs/development/data-and-backend" role="button"
      aria-expanded="false" aria-controls="sidenav-3-2"
    >Data & backend
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-2">
      <li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-2-1"
      href="/docs/development/data-and-backend/state-mgmt" role="button"
      aria-expanded="false" aria-controls="sidenav-3-2-1"
    >State management
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-2-1">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/intro">Introduction</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/declarative">Think declaratively</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/ephemeral-vs-app">Ephemeral vs app state</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/simple">Simple app state management</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/options">Options</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/networking">Networking & http</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/json">JSON and serialization</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/firebase">Firebase</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/google-apis">Google APIs</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-3"
      href="/docs/development/accessibility-and-localization" role="button"
      aria-expanded="false" aria-controls="sidenav-3-3"
    >Accessibility & internationalization
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-3">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/accessibility-and-localization/accessibility">Accessibility</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/accessibility-and-localization/internationalization">Internationalization</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-4"
      href="/docs/development/platform-integration" role="button"
      aria-expanded="false" aria-controls="sidenav-3-4"
    >Platform integration
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-4">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/sdk/release-notes/supported-platforms">Supported platforms</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/platform-integration/ios-app-clip">Adding iOS App Clip support</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/platform-integration/apple-watch">Apple Watch support</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/platform-integration/c-interop">C interop</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/platform-integration/platform-views">Hosting native Android and iOS views</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/platform-integration/web">Web FAQ</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/platform-integration/platform-channels">Writing platform-specific code</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-5"
      href="/docs/development/packages-and-plugins" role="button"
      aria-expanded="false" aria-controls="sidenav-3-5"
    >Packages & plugins
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-5">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/using-packages">Using packages</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/developing-packages">Developing packages & plugins</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/favorites">Flutter Favorites program</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/background-processes">Background processes</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/plugin-api-migration">Android plugin upgrade</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://pub.dev/flutter" target="_blank" rel="noopener">Package site<i class="fas fa-external-link-alt"></i></a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-6"
      href="/docs/development/add-to-app" role="button"
      aria-expanded="false" aria-controls="sidenav-3-6"
    >Add Flutter to existing app
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-6">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app">Introduction</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-6-2"
      href="/docs/development/add-to-app/android" role="button"
      aria-expanded="false" aria-controls="sidenav-3-6-2"
    >Adding to an Android app
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-6-2">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/android/project-setup">Project setup</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/android/add-flutter-screen">Add a single Flutter screen</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/android/add-flutter-fragment">Add a Flutter Fragment</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/android/add-flutter-view">Add a Flutter View</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/android/plugin-setup">Plugin setup</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-6-3"
      href="/docs/development/add-to-app/ios" role="button"
      aria-expanded="false" aria-controls="sidenav-3-6-3"
    >Adding to an iOS app
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-6-3">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/ios/project-setup">Project setup</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/ios/add-flutter-screen">Add a single Flutter screen</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/debugging">Debugging & hot reload</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/performance">Loading sequence and performance</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/multiple-flutters">Multiple Flutter instances</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-7"
      href="/docs/development/tools" role="button"
      aria-expanded="false" aria-controls="sidenav-3-7"
    >Tools & features
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-7">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/android-studio">Android Studio & IntelliJ</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/vs-code">Visual Studio Code</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-7-3"
      href="/docs/development/tools/devtools" role="button"
      aria-expanded="false" aria-controls="sidenav-3-7-3"
    >DevTools
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-7-3">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/overview">Overview</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/android-studio">Install from Android Studio & IntelliJ</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/vscode">Install from VS Code</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/cli">Install from command line</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/inspector">Flutter inspector</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/performance">Performance view</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/cpu-profiler">CPU Profiler view</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/memory">Memory view</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/network">Network view</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/debugger">Debugger</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/logging">Logging view</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/app-size">App size tool</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-7-4"
      href="/docs/development/tools/sdk" role="button"
      aria-expanded="false" aria-controls="sidenav-3-7-4"
    >Flutter SDK
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-7-4">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/sdk/overview">Overview</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/sdk/upgrading">Upgrading</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/sdk/releases">Releases</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/release/breaking-changes">Breaking changes</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/sdk/release-notes">Release notes</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/pubspec">Flutter and the pubspec file</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/hot-reload">Hot reload</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/flutter-fix">Flutter Fix</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/formatting">Code formatting</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/web-renderers">Web renderers</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-8"
      href="/docs/development/androidx-migration" role="button"
      aria-expanded="false" aria-controls="sidenav-3-8"
    >Migration notes
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-8">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/androidx-migration">AndroidX migration</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/plugin-api-migration">Android plugin upgrade</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/ios-14">Developing for iOS 14</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/ios-project-migration">Xcode 11.4 support</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-4" role="button"
        aria-expanded="false" aria-controls="sidenav-4"
      >Testing & debugging</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-4">
        <li class="nav-item">
    <a class="nav-link" href="/docs/testing/debugging">Debugging tools</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/code-debugging">Debugging apps programmatically</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/oem-debuggers">Using an OEM debugger</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/build-modes">Flutter's build modes</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/common-errors">Common Flutter errors</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/errors">Handling errors</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing">Testing</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/integration-tests">Integration testing</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-5" role="button"
        aria-expanded="false" aria-controls="sidenav-5"
      >Performance & optimization</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5">
        <li class="nav-item">
    <a class="nav-link" href="/docs/perf">Overview</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/perf/app-size">App size</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-5-3"
      href="/docs/perf/rendering" role="button"
      aria-expanded="false" aria-controls="sidenav-5-3"
    >Rendering performance
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5-3">
      <li class="nav-item">
    <a class="nav-link" href="/docs/perf/rendering">Overview</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/perf/rendering/best-practices">Performance best practices</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/perf/rendering/ui-performance">Performance profiling</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/perf/rendering/shader">Reduce shader compilation jank</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/perf/metrics">Performance metrics</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/perf/faq">Performance FAQ</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/perf/appendix">Appendix</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-6" role="button"
        aria-expanded="false" aria-controls="sidenav-6"
      >Deployment</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6">
        <li class="nav-item">
    <a class="nav-link" href="/docs/deployment/obfuscate">Obfuscating Dart code</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/flavors">Creating flavors for Flutter</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/android">Build and release an Android app</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/ios">Build and release an iOS app</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/linux">Build and release a Linux app</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/web">Build and release a web app</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/cd">Continuous deployment</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-7" role="button"
        aria-expanded="false" aria-controls="sidenav-7"
      >Resources</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-7">
        <li class="nav-item">
    <a class="nav-link" href="/docs/resources/bootstrap-into-dart">Dart resources</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/compatibility">Compatibility policy</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/architectural-overview">Architectural overview</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/inside-flutter">Inside Flutter</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://pub.dev/packages/google_fonts" target="_blank" rel="noopener">Google Fonts package<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/platform-adaptations">Platform adaptations</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/videos">Videos and online courses</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/books">Books</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/faq">FAQ</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/design-docs">Design Documents</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/bug-reports">Creating useful bug reports</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://github.com/flutter/flutter/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener">Contributing to Flutter<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://drive.google.com/drive/folders/1KXNtO9My2AMpDOF9A9Y_4aj4_BcgmDDT" target="_blank" rel="noopener">Official brand assets<i class="fas fa-external-link-alt"></i></a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link " data-toggle="collapse" href="#sidenav-8" role="button"
        aria-expanded="true" aria-controls="sidenav-8"
      >Reference</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-8">
        <li class="nav-item">
    <a class="nav-link" href="/dash">Who is Dash?</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/reference/widgets">Widget index</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://api.flutter.dev" target="_blank" rel="noopener">API reference<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/reference/flutter-cli">flutter CLI reference</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://pub.dev/flutter" target="_blank" rel="noopener">Package site<i class="fas fa-external-link-alt"></i></a>
  </li>
</ul>
    </li></ul>

          </div>

          <li class="nav-item">
            <a class="nav-link" href="/showcase">Showcase</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/community">Community</a>
          </li>
        </ul>
        <form action="/search/" class="site-header__search form-inline">
          <input class="site-header__searchfield form-control" type="search" name="q" id="q" autocomplete="off" placeholder="Search" aria-label="Search">
        </form>
      </div>
    </div>
    <div class="site-header__social navbar-nav flex-row">
      <a class="nav-item nav-link" href="https://twitter.com/flutterdev" aria-label="Twittter"><i class="fab fa-twitter fa-lg"></i></a>
      <a class="nav-item nav-link" href="https://www.youtube.com/flutterdev" aria-label="YouTube"><i class="fab fa-youtube fa-lg"></i></a>
      <a class="nav-item nav-link" href="https://github.com/flutter" aria-label="Github"><i class="fab fa-github fa-lg"></i></a>
    </div>
    <a class="site-header__cta btn btn-primary" href="/docs/get-started/install/">Get started</a>
    </nav>
</header>
<!---->
  
  <div class="site-banner site-banner--default" role="alert">
    Flutter's I/O schedule is live. <a href="http://goo.gle/io21-flutter-agenda-4">Learn more</a>.
  </div>
<div class="container-fluid position-relative">
  <div class="row flex-xl-nowrap">
    <div class="fixed-col site-sidebar site-sidebar--fixed col-12 col-md-3 col-xl-2 d-none d-md-block" data-fixed-column>
      <ul class="nav flex-column"><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-1" role="button"
        aria-expanded="false" aria-controls="sidenav-1"
      >Get started</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-1">
        <li class="nav-item">
    <a class="nav-link" href="/docs/get-started/install">1. Install</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/editor">2. Set up an editor</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/test-drive">3. Test drive</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/codelab">4. Write your first app</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/learn-more">5. Learn more</a>
  </li><div class="dropdown-divider"></div><li class="nav-item">
    <a class="nav-link collapsable"
      data-toggle="collapse" data-target="#sidenav-1-7"
      href="#sidenav-1-7" role="button"
      aria-expanded="true" aria-controls="sidenav-1-7"
    >From another platform?
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-1-7">
      <li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/android-devs">Flutter for Android devs</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/ios-devs">Flutter for iOS devs</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/react-native-devs">Flutter for React Native devs</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/web-devs">Flutter for web devs</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/xamarin-forms-devs">Flutter for Xamarin.Forms devs</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/flutter-for/declarative">Introduction to declarative UI</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="https://dart.dev/overview" target="_blank" rel="noopener">Dart language overview<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/get-started/web">Building a web app</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link active" data-toggle="collapse" href="#sidenav-2" role="button"
        aria-expanded="true" aria-controls="sidenav-2"
      >Samples & tutorials</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-2">
        <li class="nav-item">
    <a class="nav-link" href="https://gallery.flutter.dev" target="_blank" rel="noopener">Flutter Gallery [running app]<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://github.com/flutter/gallery" target="_blank" rel="noopener">Flutter Gallery [repo]<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://flutter.github.io/samples/" target="_blank" rel="noopener">Sample apps on GitHub<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link active" href="/docs/cookbook">Cookbook</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/codelabs">Codelabs</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/reference/tutorials">Tutorials</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link " data-toggle="collapse" href="#sidenav-3" role="button"
        aria-expanded="true" aria-controls="sidenav-3"
      >Development</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-3">
        <li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-1"
      href="/docs/development/ui" role="button"
      aria-expanded="false" aria-controls="sidenav-3-1"
    >User interface
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-1">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/widgets-intro">Introduction to widgets</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-1-2"
      href="/docs/development/ui/layout" role="button"
      aria-expanded="false" aria-controls="sidenav-3-1-2"
    >Building layouts
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-1-2">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/layout">Layouts in Flutter</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/layout/tutorial">Tutorial</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/layout/adaptive-responsive">Creating adaptive and responsive apps</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/layout/constraints">Understanding constraints [NEW]</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/layout/box-constraints">Box constraints</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/interactive">Adding interactivity</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/assets-and-images">Assets and images</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-1-5"
      href="/docs/development/ui/navigation" role="button"
      aria-expanded="false" aria-controls="sidenav-3-1-5"
    >Navigation & routing
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-1-5">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/navigation">Navigation in Flutter</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/navigation/deep-linking">Deep linking</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/navigation/url-strategies">URL strategies</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-1-6"
      href="/docs/development/ui/animations" role="button"
      aria-expanded="false" aria-controls="sidenav-3-1-6"
    >Animations
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-1-6">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations">Introduction</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/overview">Overview</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/tutorial">Tutorial</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/implicit-animations">Implicit animations</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/hero-animations">Hero animations</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/animations/staggered-animations">Staggered animations</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-1-7"
      href="/docs/development/ui/advanced" role="button"
      aria-expanded="false" aria-controls="sidenav-3-1-7"
    >Advanced UI
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-1-7">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/advanced/slivers">Slivers</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/advanced/gestures">Gestures</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/advanced/splash-screen">Splash screens</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/development/ui/widgets">Widget catalog</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-2"
      href="/docs/development/data-and-backend" role="button"
      aria-expanded="false" aria-controls="sidenav-3-2"
    >Data & backend
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-2">
      <li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-2-1"
      href="/docs/development/data-and-backend/state-mgmt" role="button"
      aria-expanded="false" aria-controls="sidenav-3-2-1"
    >State management
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-2-1">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/intro">Introduction</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/declarative">Think declaratively</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/ephemeral-vs-app">Ephemeral vs app state</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/simple">Simple app state management</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/state-mgmt/options">Options</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/networking">Networking & http</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/json">JSON and serialization</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/firebase">Firebase</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/data-and-backend/google-apis">Google APIs</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-3"
      href="/docs/development/accessibility-and-localization" role="button"
      aria-expanded="false" aria-controls="sidenav-3-3"
    >Accessibility & internationalization
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-3">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/accessibility-and-localization/accessibility">Accessibility</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/accessibility-and-localization/internationalization">Internationalization</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-4"
      href="/docs/development/platform-integration" role="button"
      aria-expanded="false" aria-controls="sidenav-3-4"
    >Platform integration
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-4">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/sdk/release-notes/supported-platforms">Supported platforms</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/platform-integration/ios-app-clip">Adding iOS App Clip support</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/platform-integration/apple-watch">Apple Watch support</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/platform-integration/c-interop">C interop</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/platform-integration/platform-views">Hosting native Android and iOS views</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/platform-integration/web">Web FAQ</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/platform-integration/platform-channels">Writing platform-specific code</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-5"
      href="/docs/development/packages-and-plugins" role="button"
      aria-expanded="false" aria-controls="sidenav-3-5"
    >Packages & plugins
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-5">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/using-packages">Using packages</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/developing-packages">Developing packages & plugins</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/favorites">Flutter Favorites program</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/background-processes">Background processes</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/plugin-api-migration">Android plugin upgrade</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://pub.dev/flutter" target="_blank" rel="noopener">Package site<i class="fas fa-external-link-alt"></i></a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-6"
      href="/docs/development/add-to-app" role="button"
      aria-expanded="false" aria-controls="sidenav-3-6"
    >Add Flutter to existing app
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-6">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app">Introduction</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-6-2"
      href="/docs/development/add-to-app/android" role="button"
      aria-expanded="false" aria-controls="sidenav-3-6-2"
    >Adding to an Android app
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-6-2">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/android/project-setup">Project setup</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/android/add-flutter-screen">Add a single Flutter screen</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/android/add-flutter-fragment">Add a Flutter Fragment</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/android/add-flutter-view">Add a Flutter View</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/android/plugin-setup">Plugin setup</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-6-3"
      href="/docs/development/add-to-app/ios" role="button"
      aria-expanded="false" aria-controls="sidenav-3-6-3"
    >Adding to an iOS app
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-6-3">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/ios/project-setup">Project setup</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/ios/add-flutter-screen">Add a single Flutter screen</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/debugging">Debugging & hot reload</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/performance">Loading sequence and performance</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/add-to-app/multiple-flutters">Multiple Flutter instances</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-7"
      href="/docs/development/tools" role="button"
      aria-expanded="false" aria-controls="sidenav-3-7"
    >Tools & features
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-7">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/android-studio">Android Studio & IntelliJ</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/vs-code">Visual Studio Code</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-7-3"
      href="/docs/development/tools/devtools" role="button"
      aria-expanded="false" aria-controls="sidenav-3-7-3"
    >DevTools
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-7-3">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/overview">Overview</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/android-studio">Install from Android Studio & IntelliJ</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/vscode">Install from VS Code</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/cli">Install from command line</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/inspector">Flutter inspector</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/performance">Performance view</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/cpu-profiler">CPU Profiler view</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/memory">Memory view</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/network">Network view</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/debugger">Debugger</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/logging">Logging view</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/devtools/app-size">App size tool</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-7-4"
      href="/docs/development/tools/sdk" role="button"
      aria-expanded="false" aria-controls="sidenav-3-7-4"
    >Flutter SDK
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-7-4">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/sdk/overview">Overview</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/sdk/upgrading">Upgrading</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/sdk/releases">Releases</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/release/breaking-changes">Breaking changes</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/sdk/release-notes">Release notes</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/pubspec">Flutter and the pubspec file</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/hot-reload">Hot reload</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/flutter-fix">Flutter Fix</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/formatting">Code formatting</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/tools/web-renderers">Web renderers</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-8"
      href="/docs/development/androidx-migration" role="button"
      aria-expanded="false" aria-controls="sidenav-3-8"
    >Migration notes
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-8">
      <li class="nav-item">
    <a class="nav-link" href="/docs/development/androidx-migration">AndroidX migration</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/packages-and-plugins/plugin-api-migration">Android plugin upgrade</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/ios-14">Developing for iOS 14</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/development/ios-project-migration">Xcode 11.4 support</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-4" role="button"
        aria-expanded="false" aria-controls="sidenav-4"
      >Testing & debugging</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-4">
        <li class="nav-item">
    <a class="nav-link" href="/docs/testing/debugging">Debugging tools</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/code-debugging">Debugging apps programmatically</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/oem-debuggers">Using an OEM debugger</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/build-modes">Flutter's build modes</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/common-errors">Common Flutter errors</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/errors">Handling errors</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing">Testing</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/testing/integration-tests">Integration testing</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-5" role="button"
        aria-expanded="false" aria-controls="sidenav-5"
      >Performance & optimization</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5">
        <li class="nav-item">
    <a class="nav-link" href="/docs/perf">Overview</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/perf/app-size">App size</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-5-3"
      href="/docs/perf/rendering" role="button"
      aria-expanded="false" aria-controls="sidenav-5-3"
    >Rendering performance
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5-3">
      <li class="nav-item">
    <a class="nav-link" href="/docs/perf/rendering">Overview</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/perf/rendering/best-practices">Performance best practices</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/perf/rendering/ui-performance">Performance profiling</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/perf/rendering/shader">Reduce shader compilation jank</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/docs/perf/metrics">Performance metrics</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/perf/faq">Performance FAQ</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/perf/appendix">Appendix</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-6" role="button"
        aria-expanded="false" aria-controls="sidenav-6"
      >Deployment</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6">
        <li class="nav-item">
    <a class="nav-link" href="/docs/deployment/obfuscate">Obfuscating Dart code</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/flavors">Creating flavors for Flutter</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/android">Build and release an Android app</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/ios">Build and release an iOS app</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/linux">Build and release a Linux app</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/web">Build and release a web app</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/deployment/cd">Continuous deployment</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-7" role="button"
        aria-expanded="false" aria-controls="sidenav-7"
      >Resources</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-7">
        <li class="nav-item">
    <a class="nav-link" href="/docs/resources/bootstrap-into-dart">Dart resources</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/compatibility">Compatibility policy</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/architectural-overview">Architectural overview</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/inside-flutter">Inside Flutter</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://pub.dev/packages/google_fonts" target="_blank" rel="noopener">Google Fonts package<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/platform-adaptations">Platform adaptations</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/videos">Videos and online courses</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/books">Books</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/faq">FAQ</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/design-docs">Design Documents</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/resources/bug-reports">Creating useful bug reports</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://github.com/flutter/flutter/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener">Contributing to Flutter<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://drive.google.com/drive/folders/1KXNtO9My2AMpDOF9A9Y_4aj4_BcgmDDT" target="_blank" rel="noopener">Official brand assets<i class="fas fa-external-link-alt"></i></a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link " data-toggle="collapse" href="#sidenav-8" role="button"
        aria-expanded="true" aria-controls="sidenav-8"
      >Reference</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-8">
        <li class="nav-item">
    <a class="nav-link" href="/dash">Who is Dash?</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/reference/widgets">Widget index</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://api.flutter.dev" target="_blank" rel="noopener">API reference<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="/docs/reference/flutter-cli">flutter CLI reference</a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://pub.dev/flutter" target="_blank" rel="noopener">Package site<i class="fas fa-external-link-alt"></i></a>
  </li>
</ul>
    </li></ul>

    </div>
    <div
  id="site-toc--side"
  class="site-toc site-toc--side fixed-col col-xl-2 order-3"
  data-fixed-column
>
  <header class="site-toc__title">
    Contents
    <button type="button" class="btn site-toc--button__page-top" aria-label="Page top"></button>
    </header>
  <ul class="section-nav nav">
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#define-a-new-stateful-widget">Define a new stateful widget</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#define-the-buttons-possible-visual-states">Define the button’s possible visual states</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#display-the-button-shape">Display the button shape</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#display-the-button-text">Display the button text</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#display-a-spinner-while-fetching-download">Display a spinner while fetching download</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#display-the-progress-and-a-stop-button-while-downloading">Display the progress and a stop button while downloading</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#add-button-tap-callbacks">Add button tap callbacks</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#interactive-example">Interactive example</a></li>
</ul>
</div>
<main class="site-content col-12 col-md-9 offset-md-3 col-xl-8 offset-xl-2 col-xxl-8 offset-xxl-2" role="main">
      <div class="container">
        
        <nav class="site-nextprev-nav">
    <ul>
      <li class="prev">
          <a href="/docs/cookbook/design/tabs">Work with tabs</a>
      </li>
      <li class="next">
          <a href="/docs/cookbook/effects/nested-nav">Create a nested navigation flow</a>
      </li>
      </ul>
  </nav>

        <header class="site-content__title">
          <div id="page-github-links" class="btn-group" aria-label="Page GitHub links" role="group">
  <a href="https://github.com/flutter/website/tree/master/src/docs/cookbook/effects/download-button.md" class="btn no-automatic-external" title="View page source" target="_blank" rel="noopener">
    <i class="fas fa-file-alt fa-sm"></i>
  </a>
  <a href="https://github.com/flutter/website/issues/new?title='Create a download button' page issue&body=
Page URL: https://flutter.dev/docs/cookbook/effects/download-button.html%0D%0A
Page source: https://github.com/flutter/website/tree/master/src/docs/cookbook/effects/download-button.md%0D%0A
%0D%0A
Found a typo? You can fix it yourself by going to the page source and clicking the pencil icon. Or finish creating this issue.%0D%0A
%0D%0A
Description of issue:" class="btn no-automatic-external" title="Report an issue with this page"
    target="_blank" rel="noopener">
    <i class="fas fa-bug fa-sm"></i>
  </a>
</div>

          <h1>Create a download button</h1>
          

<nav aria-label="breadcrumb">
  <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
  <li class="breadcrumb-item"
      property="itemListElement" typeof="ListItem"><a href="/docs" property="item" typeof="WebPage"><span property="name">Docs</span>
      </a>
      <meta property="position" content="1" />
    </li>
  <li class="breadcrumb-item"
      property="itemListElement" typeof="ListItem"><a href="/docs/cookbook" property="item" typeof="WebPage"><span property="name">Cookbook</span>
      </a>
      <meta property="position" content="2" />
    </li>
  <li class="breadcrumb-item"
      property="itemListElement" typeof="ListItem"><a href="/docs/cookbook/effects" property="item" typeof="WebPage"><span property="name">Effects</span>
      </a>
      <meta property="position" content="3" />
    </li>
  <li class="breadcrumb-item active"
      property="itemListElement" typeof="ListItem" aria-current="page"><a href="/docs/cookbook/effects/download-button.html" property="item" typeof="WebPage"><span property="name">Create a download button</span>
      </a>
      <meta property="position" content="4" />
    </li>
  
  </ol>
</nav>
          </header>
        <div
  id="site-toc--inline"
  class="site-toc site-toc--inline "
  
>
  <header class="site-toc__title">
    Contents
    </header>
  <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#define-a-new-stateful-widget">Define a new stateful widget</a></li>
<li class="toc-entry toc-h2"><a href="#define-the-buttons-possible-visual-states">Define the button’s possible visual states</a></li>
<li class="toc-entry toc-h2"><a href="#display-the-button-shape">Display the button shape</a></li>
<li class="toc-entry toc-h2"><a href="#display-the-button-text">Display the button text</a></li>
<li class="toc-entry toc-h2"><a href="#display-a-spinner-while-fetching-download">Display a spinner while fetching download</a></li>
<li class="toc-entry toc-h2"><a href="#display-the-progress-and-a-stop-button-while-downloading">Display the progress and a stop button while downloading</a></li>
<li class="toc-entry toc-h2"><a href="#add-button-tap-callbacks">Add button tap callbacks</a></li>
<li class="toc-entry toc-h2"><a href="#interactive-example">Interactive example</a></li>
</ul>
</div>
<p>Apps are filled with buttons that execute long-running behaviors.
For example, a button might trigger a download,
which starts a download process, receives data over time,
and then provides access to the downloaded asset. 
It’s helpful to show the user the progress of a
long-running process, and the button itself is a good place
to provide this feedback. In this recipe,
you’ll build a download button that transitions through
multiple visual states, based on the status of an app download.</p>

<p>The following animation shows the app’s behavior:</p>

<p><img src="/assets/cookbook/effects/DownloadButton-73b476247ce5303075395820b8f4d57d5163a09dd05aa46fb875065262d2fb50.gif" alt="The download button cycles through its stages" class="site-mobile-screenshot"></p>

<h2 id="define-a-new-stateful-widget">
<a class="anchor" href="#define-a-new-stateful-widget" aria-hidden="true"><span class="octicon octicon-link"></span></a>Define a new stateful widget</h2>

<p>Your button widget needs to change its appearance over time.
Therefore, you need to implement your button with a custom
stateful widget.</p>

<p>Define a new stateful widget called <code class="language-plaintext highlighter-rouge">DownloadButton</code>.</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@immutable</span>
<span class="kd">class</span> <span class="nc">DownloadButton</span> <span class="kd">extends</span> <span class="n">StatefulWidget</span> <span class="o">{</span>
 <span class="kd">const</span> <span class="n">DownloadButton</span><span class="o">({</span>
   <span class="n">Key</span><span class="o">?</span> <span class="n">key</span><span class="o">,</span>
 <span class="o">})</span> <span class="o">:</span> <span class="k">super</span><span class="o">(</span><span class="nl">key:</span> <span class="n">key</span><span class="o">);</span>

 <span class="nd">@override</span>
 <span class="n">_DownloadButtonState</span> <span class="n">createState</span><span class="o">()</span> <span class="o">=&gt;</span> <span class="n">_DownloadButtonState</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">_DownloadButtonState</span> <span class="kd">extends</span> <span class="n">State</span><span class="o">&lt;</span><span class="n">DownloadButton</span><span class="o">&gt;</span> <span class="o">{</span>
 <span class="nd">@override</span>
 <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
   <span class="c1">// TODO:</span>
   <span class="k">return</span> <span class="n">SizedBox</span><span class="o">();</span>
 <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="define-the-buttons-possible-visual-states">
<a class="anchor" href="#define-the-buttons-possible-visual-states" aria-hidden="true"><span class="octicon octicon-link"></span></a>Define the button’s possible visual states</h2>

<p>The download button’s visual presentation is based on a
given download status. Define the possible states of
the download, and then update <code class="language-plaintext highlighter-rouge">DownloadButton</code> to accept
a <code class="language-plaintext highlighter-rouge">DownloadStatus</code> and a <code class="language-plaintext highlighter-rouge">Duration</code> for how long the button
should take to animate from one status to another.</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">enum</span> <span class="n">DownloadStatus</span> <span class="o">{</span>
 <span class="n">notDownloaded</span><span class="o">,</span>
 <span class="n">fetchingDownload</span><span class="o">,</span>
 <span class="n">downloading</span><span class="o">,</span>
 <span class="n">downloaded</span><span class="o">,</span>
<span class="o">}</span>

<span class="nd">@immutable</span>
<span class="kd">class</span> <span class="nc">DownloadButton</span> <span class="kd">extends</span> <span class="n">StatefulWidget</span> <span class="o">{</span>
 <span class="kd">const</span> <span class="n">DownloadButton</span><span class="o">({</span>
   <span class="n">Key</span><span class="o">?</span> <span class="n">key</span><span class="o">,</span>
   <span class="n">required</span> <span class="k">this</span><span class="o">.</span><span class="na">status</span><span class="o">,</span>
   <span class="k">this</span><span class="o">.</span><span class="na">transitionDuration</span> <span class="o">=</span> <span class="kd">const</span> <span class="n">Duration</span><span class="o">(</span><span class="nl">milliseconds:</span> <span class="mi">500</span><span class="o">),</span>
 <span class="o">})</span> <span class="o">:</span> <span class="k">super</span><span class="o">(</span><span class="nl">key:</span> <span class="n">key</span><span class="o">);</span>

 <span class="kd">final</span> <span class="n">DownloadStatus</span> <span class="n">status</span><span class="o">;</span>
 <span class="kd">final</span> <span class="n">Duration</span> <span class="n">transitionDuration</span><span class="o">;</span>

 <span class="nd">@override</span>
 <span class="n">_DownloadButtonState</span> <span class="n">createState</span><span class="o">()</span> <span class="o">=&gt;</span> <span class="n">_DownloadButtonState</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<aside class="alert alert-info" role="alert">
  <p><i class="fas fa-info-circle"></i> <strong>Note:</strong>
  Each time you define a custom widget,
  you must decide whether all relevant 
  information is provided to that widget
  from its parent or if that widget orchestrates
  the application behavior within itself.
  For example, <code class="language-plaintext highlighter-rouge">DownloadButton</code> could receive the
  current <code class="language-plaintext highlighter-rouge">DownloadStatus</code> from its parent, 
  or the <code class="language-plaintext highlighter-rouge">DownloadButton</code> could orchestrate the
  download process itself within its <code class="language-plaintext highlighter-rouge">State</code> object.
  For most widgets, the best answer is to pass the relevant 
  information into the widget from its parent,
  rather than manage behavior within the widget.
  By passing in all the relevant information,
  you ensure greater reusability for the widget,
  easier testing, and easier changes to application 
  behavior in the future.</p>
</aside>

<h2 id="display-the-button-shape">
<a class="anchor" href="#display-the-button-shape" aria-hidden="true"><span class="octicon octicon-link"></span></a>Display the button shape</h2>

<p>The download button changes its shape based on the download
status. The button displays a grey, rounded rectangle during
the <code class="language-plaintext highlighter-rouge">notDownloaded</code> and <code class="language-plaintext highlighter-rouge">downloaded</code> states.
The button displays a transparent circle during the
<code class="language-plaintext highlighter-rouge">fetchingDownload</code> and <code class="language-plaintext highlighter-rouge">downloading</code> states.</p>

<p>Based on the current <code class="language-plaintext highlighter-rouge">DownloadStatus</code>,
build an <code class="language-plaintext highlighter-rouge">AnimatedContainer</code> with a 
<code class="language-plaintext highlighter-rouge">ShapeDecoration</code> that displays a rounded
rectangle or a circle.</p>

<p>Consider defining the shape’s widget tree within a local
<code class="language-plaintext highlighter-rouge">_buildXXXX()</code> method so that the main <code class="language-plaintext highlighter-rouge">build()</code>
method remains simple, allowing for the additions 
that follow. Also, configure the shape widget tree to
accept a child widget, which you’ll use to display text
in a later step.</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">_DownloadButtonState</span> <span class="kd">extends</span> <span class="n">State</span><span class="o">&lt;</span><span class="n">DownloadButton</span><span class="o">&gt;</span> <span class="o">{</span>
 <span class="kt">bool</span> <span class="kd">get</span> <span class="n">_isDownloading</span> <span class="o">=&gt;</span> <span class="n">widget</span><span class="o">.</span><span class="na">status</span> <span class="o">==</span> <span class="n">DownloadStatus</span><span class="o">.</span><span class="na">downloading</span><span class="o">;</span>

 <span class="kt">bool</span> <span class="kd">get</span> <span class="n">_isFetching</span> <span class="o">=&gt;</span> <span class="n">widget</span><span class="o">.</span><span class="na">status</span> <span class="o">==</span> <span class="n">DownloadStatus</span><span class="o">.</span><span class="na">fetchingDownload</span><span class="o">;</span>

 <span class="kt">bool</span> <span class="kd">get</span> <span class="n">_isDownloaded</span> <span class="o">=&gt;</span> <span class="n">widget</span><span class="o">.</span><span class="na">status</span> <span class="o">==</span> <span class="n">DownloadStatus</span><span class="o">.</span><span class="na">downloaded</span><span class="o">;</span>

 <span class="nd">@override</span>
 <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
   <span class="k">return</span> <span class="n">_buildButtonShape</span><span class="o">(</span>
     <span class="nl">child:</span> <span class="n">SizedBox</span><span class="o">(),</span>
   <span class="o">);</span>
 <span class="o">}</span>

 <span class="n">Widget</span> <span class="n">_buildButtonShape</span><span class="o">({</span>
   <span class="n">required</span> <span class="n">Widget</span> <span class="n">child</span><span class="o">,</span>
 <span class="o">})</span> <span class="o">{</span>
   <span class="k">return</span> <span class="n">AnimatedContainer</span><span class="o">(</span>
     <span class="nl">duration:</span> <span class="n">widget</span><span class="o">.</span><span class="na">transitionDuration</span><span class="o">,</span>
     <span class="nl">curve:</span> <span class="n">Curves</span><span class="o">.</span><span class="na">ease</span><span class="o">,</span>
     <span class="nl">width:</span> <span class="kt">double</span><span class="o">.</span><span class="na">infinity</span><span class="o">,</span>
     <span class="nl">decoration:</span> <span class="n">_isDownloading</span> <span class="o">||</span> <span class="n">_isFetching</span>
         <span class="o">?</span> <span class="n">ShapeDecoration</span><span class="o">(</span>
             <span class="nl">shape:</span> <span class="kd">const</span> <span class="n">CircleBorder</span><span class="o">(),</span>
             <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">white</span><span class="o">.</span><span class="na">withOpacity</span><span class="o">(</span><span class="mf">0.0</span><span class="o">),</span>
           <span class="o">)</span>
         <span class="o">:</span> <span class="kd">const</span> <span class="n">ShapeDecoration</span><span class="o">(</span>
             <span class="nl">shape:</span> <span class="n">StadiumBorder</span><span class="o">(),</span>
             <span class="nl">color:</span> <span class="n">CupertinoColors</span><span class="o">.</span><span class="na">lightBackgroundGray</span><span class="o">,</span>
           <span class="o">),</span>
     <span class="nl">child:</span> <span class="n">child</span><span class="o">,</span>
   <span class="o">);</span>
 <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>You might wonder why you need a <code class="language-plaintext highlighter-rouge">ShapeDecoration</code>
widget for a transparent circle, given that it’s invisible.
The purpose of the invisible circle is to orchestrate
the desired animation. The <code class="language-plaintext highlighter-rouge">AnimatedContainer</code> begins with a rounded 
rectangle. When the <code class="language-plaintext highlighter-rouge">DownloadStatus</code> changes to <code class="language-plaintext highlighter-rouge">fetchingDownload</code>,
the <code class="language-plaintext highlighter-rouge">AnimatedContainer</code> needs to animate from a rounded rectangle
to a circle, and then fade out as the animation takes place.
The only way to implement this animation is to define both
the beginning shape of a rounded rectangle and the 
ending shape of a circle. But, you don’t want the final
circle to be visible, so you make it transparent,
which causes an animated fade-out.</p>

<h2 id="display-the-button-text">
<a class="anchor" href="#display-the-button-text" aria-hidden="true"><span class="octicon octicon-link"></span></a>Display the button text</h2>

<p>The <code class="language-plaintext highlighter-rouge">DownloadButton</code> displays <code class="language-plaintext highlighter-rouge">GET</code> during the
<code class="language-plaintext highlighter-rouge">notDownloaded</code> phase, <code class="language-plaintext highlighter-rouge">OPEN</code> during the <code class="language-plaintext highlighter-rouge">downloaded</code>
phase, and no text in between.</p>

<p>Add widgets to display text during each download phase,
and animate the text’s opacity in between. Add the text
widget tree as a child of the shape widget tree.</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">_DownloadButtonState</span> <span class="kd">extends</span> <span class="n">State</span><span class="o">&lt;</span><span class="n">DownloadButton</span><span class="o">&gt;</span> <span class="o">{</span>
 <span class="nd">@override</span>
 <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
   <span class="k">return</span> <span class="n">_buildButtonShape</span><span class="o">(</span>
     <span class="nl">child:</span> <span class="n">_buildText</span><span class="o">(),</span>
   <span class="o">);</span>
 <span class="o">}</span>

 <span class="n">Widget</span> <span class="n">_buildText</span><span class="o">()</span> <span class="o">{</span>
   <span class="kd">final</span> <span class="n">text</span> <span class="o">=</span> <span class="n">_isDownloaded</span> <span class="o">?</span> <span class="s">'OPEN'</span> <span class="o">:</span> <span class="s">'GET'</span><span class="o">;</span>
   <span class="kd">final</span> <span class="n">opacity</span> <span class="o">=</span> <span class="n">_isDownloading</span> <span class="o">||</span> <span class="n">_isFetching</span> <span class="o">?</span> <span class="mf">0.0</span> <span class="o">:</span> <span class="mf">1.0</span><span class="o">;</span>

   <span class="k">return</span> <span class="n">Padding</span><span class="o">(</span>
     <span class="nl">padding:</span> <span class="kd">const</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">symmetric</span><span class="o">(</span><span class="nl">vertical:</span> <span class="mi">6</span><span class="o">),</span>
     <span class="nl">child:</span> <span class="n">AnimatedOpacity</span><span class="o">(</span>
       <span class="nl">duration:</span> <span class="n">widget</span><span class="o">.</span><span class="na">transitionDuration</span><span class="o">,</span>
       <span class="nl">opacity:</span> <span class="n">opacity</span><span class="o">,</span>
       <span class="nl">curve:</span> <span class="n">Curves</span><span class="o">.</span><span class="na">ease</span><span class="o">,</span>
       <span class="nl">child:</span> <span class="n">Text</span><span class="o">(</span>
         <span class="n">text</span><span class="o">,</span>
         <span class="nl">textAlign:</span> <span class="n">TextAlign</span><span class="o">.</span><span class="na">center</span><span class="o">,</span>
         <span class="nl">style:</span> <span class="n">Theme</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">context</span><span class="o">).</span><span class="na">textTheme</span><span class="o">.</span><span class="na">button</span><span class="o">?.</span><span class="na">copyWith</span><span class="o">(</span>
           <span class="nl">fontWeight:</span> <span class="n">FontWeight</span><span class="o">.</span><span class="na">bold</span><span class="o">,</span>
           <span class="nl">color:</span> <span class="n">CupertinoColors</span><span class="o">.</span><span class="na">activeBlue</span><span class="o">,</span>
         <span class="o">),</span>
       <span class="o">),</span>
     <span class="o">),</span>
   <span class="o">);</span>
 <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="display-a-spinner-while-fetching-download">
<a class="anchor" href="#display-a-spinner-while-fetching-download" aria-hidden="true"><span class="octicon octicon-link"></span></a>Display a spinner while fetching download</h2>

<p>During the <code class="language-plaintext highlighter-rouge">fetchingDownload</code> phase, the <code class="language-plaintext highlighter-rouge">DownloadButton</code>
displays a radial spinner. This spinner fades in from
the <code class="language-plaintext highlighter-rouge">notDownloaded</code> phase and fades out to 
the <code class="language-plaintext highlighter-rouge">fetchingDownload</code> phase.</p>

<p>Implement a radial spinner that sits on top of the button
shape and fades in and out at the appropriate times.</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">_DownloadButtonState</span> <span class="kd">extends</span> <span class="n">State</span><span class="o">&lt;</span><span class="n">DownloadButton</span><span class="o">&gt;</span> <span class="o">{</span>
 <span class="nd">@override</span>
 <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
   <span class="k">return</span> <span class="n">Stack</span><span class="o">(</span>
     <span class="nl">children:</span> <span class="o">[</span>
       <span class="n">_buildButtonShape</span><span class="o">(</span>
         <span class="nl">child:</span> <span class="n">_buildText</span><span class="o">(),</span>
       <span class="o">),</span>
       <span class="n">_buildDownloadingProgress</span><span class="o">(),</span>
     <span class="o">],</span>
   <span class="o">);</span>
 <span class="o">}</span>

 <span class="n">Widget</span> <span class="n">_buildDownloadingProgress</span><span class="o">()</span> <span class="o">{</span>
   <span class="k">return</span> <span class="n">Positioned</span><span class="o">.</span><span class="na">fill</span><span class="o">(</span>
     <span class="nl">child:</span> <span class="n">AnimatedOpacity</span><span class="o">(</span>
       <span class="nl">duration:</span> <span class="n">widget</span><span class="o">.</span><span class="na">transitionDuration</span><span class="o">,</span>
       <span class="nl">opacity:</span> <span class="n">_isDownloading</span> <span class="o">||</span> <span class="n">_isFetching</span> <span class="o">?</span> <span class="mf">1.0</span> <span class="o">:</span> <span class="mf">0.0</span><span class="o">,</span>
       <span class="nl">curve:</span> <span class="n">Curves</span><span class="o">.</span><span class="na">ease</span><span class="o">,</span>
       <span class="nl">child:</span> <span class="n">_buildProgressIndicator</span><span class="o">(),</span>
     <span class="o">),</span>
   <span class="o">);</span>
 <span class="o">}</span>

 <span class="n">Widget</span> <span class="n">_buildProgressIndicator</span><span class="o">()</span> <span class="o">{</span>
   <span class="k">return</span> <span class="n">AspectRatio</span><span class="o">(</span>
     <span class="nl">aspectRatio:</span> <span class="mf">1.0</span><span class="o">,</span>
     <span class="nl">child:</span> <span class="n">CircularProgressIndicator</span><span class="o">(</span>
       <span class="nl">backgroundColor:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">white</span><span class="o">.</span><span class="na">withOpacity</span><span class="o">(</span><span class="mf">0.0</span><span class="o">),</span>
       <span class="nl">valueColor:</span> <span class="n">AlwaysStoppedAnimation</span><span class="o">(</span>
         <span class="n">CupertinoColors</span><span class="o">.</span><span class="na">lightBackgroundGray</span>
       <span class="o">),</span>
       <span class="nl">strokeWidth:</span> <span class="mf">2.0</span><span class="o">,</span>
       <span class="nl">value:</span> <span class="kc">null</span><span class="o">,</span>
     <span class="o">),</span>
   <span class="o">);</span>
 <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="display-the-progress-and-a-stop-button-while-downloading">
<a class="anchor" href="#display-the-progress-and-a-stop-button-while-downloading" aria-hidden="true"><span class="octicon octicon-link"></span></a>Display the progress and a stop button while downloading</h2>

<p>After the <code class="language-plaintext highlighter-rouge">fetchingDownload</code> phase is the <code class="language-plaintext highlighter-rouge">downloading</code> phase.
During the <code class="language-plaintext highlighter-rouge">downloading</code> phase, the <code class="language-plaintext highlighter-rouge">DownloadButton</code>
replaces the radial progress spinner with a growing
radial progress bar. The <code class="language-plaintext highlighter-rouge">DownloadButton</code> also displays a stop 
button icon so that the user can cancel an in-progress download.</p>

<p>Add a progress property to the <code class="language-plaintext highlighter-rouge">DownloadButton</code> widget,
and then update the progress display to switch to a radial
progress bar during the <code class="language-plaintext highlighter-rouge">downloading</code> phase.</p>

<p>Next, add a stop button icon at the center of the
radial progress bar.</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@immutable</span>
<span class="kd">class</span> <span class="nc">DownloadButton</span> <span class="kd">extends</span> <span class="n">StatefulWidget</span> <span class="o">{</span>
 <span class="kd">const</span> <span class="n">DownloadButton</span><span class="o">({</span>
   <span class="n">Key</span><span class="o">?</span> <span class="n">key</span><span class="o">,</span>
   <span class="k">this</span><span class="o">.</span><span class="na">progress</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">,</span>
 <span class="o">})</span> <span class="o">:</span> <span class="k">super</span><span class="o">(</span><span class="nl">key:</span> <span class="n">key</span><span class="o">);</span>

 <span class="kd">final</span> <span class="kt">double</span> <span class="n">progress</span><span class="o">;</span>

 <span class="nd">@override</span>
 <span class="n">_DownloadButtonState</span> <span class="n">createState</span><span class="o">()</span> <span class="o">=&gt;</span> <span class="n">_DownloadButtonState</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">_DownloadButtonState</span> <span class="kd">extends</span> <span class="n">State</span><span class="o">&lt;</span><span class="n">DownloadButton</span><span class="o">&gt;</span> <span class="o">{</span>
 <span class="nd">@override</span>
 <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
   <span class="k">return</span> <span class="n">Stack</span><span class="o">(</span>
     <span class="nl">children:</span> <span class="o">[</span>
       <span class="n">_buildButtonShape</span><span class="o">(</span>
         <span class="nl">child:</span> <span class="n">_buildText</span><span class="o">(),</span>
       <span class="o">),</span>
       <span class="n">_buildDownloadingProgress</span><span class="o">(),</span>
     <span class="o">],</span>
   <span class="o">);</span>
 <span class="o">}</span>

 <span class="n">Widget</span> <span class="n">_buildDownloadingProgress</span><span class="o">()</span> <span class="o">{</span>
   <span class="k">return</span> <span class="n">Positioned</span><span class="o">.</span><span class="na">fill</span><span class="o">(</span>
     <span class="nl">child:</span> <span class="n">AnimatedOpacity</span><span class="o">(</span>
       <span class="nl">duration:</span> <span class="n">widget</span><span class="o">.</span><span class="na">transitionDuration</span><span class="o">,</span>
       <span class="nl">opacity:</span> <span class="n">_isDownloading</span> <span class="o">||</span> <span class="n">_isFetching</span> <span class="o">?</span> <span class="mf">1.0</span> <span class="o">:</span> <span class="mf">0.0</span><span class="o">,</span>
       <span class="nl">curve:</span> <span class="n">Curves</span><span class="o">.</span><span class="na">ease</span><span class="o">,</span>
       <span class="nl">child:</span> <span class="n">Stack</span><span class="o">(</span>
         <span class="nl">alignment:</span> <span class="n">Alignment</span><span class="o">.</span><span class="na">center</span><span class="o">,</span>
         <span class="nl">children:</span> <span class="o">[</span>
           <span class="n">_buildProgressIndicator</span><span class="o">(),</span>
           <span class="k">if</span> <span class="o">(</span><span class="n">_isDownloading</span><span class="o">)</span>
             <span class="kd">const</span> <span class="n">Icon</span><span class="o">(</span>
               <span class="n">Icons</span><span class="o">.</span><span class="na">stop</span><span class="o">,</span>
               <span class="nl">size:</span> <span class="mf">14.0</span><span class="o">,</span>
               <span class="nl">color:</span> <span class="n">CupertinoColors</span><span class="o">.</span><span class="na">activeBlue</span><span class="o">,</span>
             <span class="o">),</span>
         <span class="o">],</span>
       <span class="o">),</span>
     <span class="o">),</span>
   <span class="o">);</span>
 <span class="o">}</span>


 <span class="n">Widget</span> <span class="n">_buildProgressIndicator</span><span class="o">()</span> <span class="o">{</span>
   <span class="k">return</span> <span class="n">AspectRatio</span><span class="o">(</span>
     <span class="nl">aspectRatio:</span> <span class="mf">1.0</span><span class="o">,</span>
     <span class="nl">child:</span> <span class="n">TweenAnimationBuilder</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;(</span>
       <span class="nl">tween:</span> <span class="n">Tween</span><span class="o">(</span><span class="nl">begin:</span> <span class="mf">0.0</span><span class="o">,</span> <span class="nl">end:</span> <span class="n">widget</span><span class="o">.</span><span class="na">progress</span><span class="o">),</span>
       <span class="nl">duration:</span> <span class="kd">const</span> <span class="n">Duration</span><span class="o">(</span><span class="nl">milliseconds:</span> <span class="mi">200</span><span class="o">),</span>
       <span class="nl">builder:</span> <span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">,</span> <span class="kt">double</span> <span class="n">progress</span><span class="o">,</span> <span class="n">Widget</span><span class="o">?</span> <span class="n">child</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">return</span> <span class="n">CircularProgressIndicator</span><span class="o">(</span>
           <span class="nl">backgroundColor:</span> <span class="n">_isDownloading</span> <span class="o">?</span> <span class="n">CupertinoColors</span><span class="o">.</span><span class="na">lightBackgroundGray</span> <span class="o">:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">white</span><span class="o">.</span><span class="na">withOpacity</span><span class="o">(</span><span class="mf">0.0</span><span class="o">),</span>
           <span class="nl">valueColor:</span>
             <span class="n">AlwaysStoppedAnimation</span><span class="o">(</span><span class="n">_isFetching</span> <span class="o">?</span> <span class="n">CupertinoColors</span><span class="o">.</span><span class="na">lightBackgroundGray</span> <span class="o">:</span> <span class="n">CupertinoColors</span><span class="o">.</span><span class="na">activeBlue</span><span class="o">),</span>
           <span class="nl">strokeWidth:</span> <span class="mf">2.0</span><span class="o">,</span>
           <span class="nl">value:</span> <span class="n">_isFetching</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="n">progress</span><span class="o">,</span>
         <span class="o">);</span>
       <span class="o">},</span>
     <span class="o">),</span>
   <span class="o">);</span>
 <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="add-button-tap-callbacks">
<a class="anchor" href="#add-button-tap-callbacks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add button tap callbacks</h2>

<p>The last detail that your <code class="language-plaintext highlighter-rouge">DownloadButton</code> needs is the
button behavior. The button must do things when the user taps it.</p>

<p>Add widget properties for callbacks to start a download,
cancel a download, and open a download.</p>

<p>Finally, wrap <code class="language-plaintext highlighter-rouge">DownloadButton</code>’s existing widget tree
with a <code class="language-plaintext highlighter-rouge">GestureDetector</code> widget, and forward the
tap event to the corresponding callback property.</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@immutable</span>
<span class="kd">class</span> <span class="nc">DownloadButton</span> <span class="kd">extends</span> <span class="n">StatefulWidget</span> <span class="o">{</span>
 <span class="kd">const</span> <span class="n">DownloadButton</span><span class="o">({</span>
   <span class="n">Key</span><span class="o">?</span> <span class="n">key</span><span class="o">,</span>
   <span class="n">required</span> <span class="k">this</span><span class="o">.</span><span class="na">onDownload</span><span class="o">,</span>
   <span class="n">required</span> <span class="k">this</span><span class="o">.</span><span class="na">onCancel</span><span class="o">,</span>
   <span class="n">required</span> <span class="k">this</span><span class="o">.</span><span class="na">onOpen</span><span class="o">,</span>
 <span class="o">})</span> <span class="o">:</span> <span class="k">super</span><span class="o">(</span><span class="nl">key:</span> <span class="n">key</span><span class="o">);</span>

 <span class="kd">final</span> <span class="n">VoidCallback</span> <span class="n">onDownload</span><span class="o">;</span>
 <span class="kd">final</span> <span class="n">VoidCallback</span> <span class="n">onCancel</span><span class="o">;</span>
 <span class="kd">final</span> <span class="n">VoidCallback</span> <span class="n">onOpen</span><span class="o">;</span>

 <span class="nd">@override</span>
 <span class="n">_DownloadButtonState</span> <span class="n">createState</span><span class="o">()</span> <span class="o">=&gt;</span> <span class="n">_DownloadButtonState</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">_DownloadButtonState</span> <span class="kd">extends</span> <span class="n">State</span><span class="o">&lt;</span><span class="n">DownloadButton</span><span class="o">&gt;</span> <span class="o">{</span>
 <span class="kt">void</span> <span class="n">_onPressed</span><span class="o">()</span> <span class="o">{</span>
   <span class="k">switch</span> <span class="o">(</span><span class="n">widget</span><span class="o">.</span><span class="na">status</span><span class="o">)</span> <span class="o">{</span>
     <span class="k">case</span> <span class="n">DownloadStatus</span><span class="o">.</span><span class="na">notDownloaded</span><span class="o">:</span>
       <span class="n">widget</span><span class="o">.</span><span class="na">onDownload</span><span class="o">();</span>
       <span class="k">break</span><span class="o">;</span>
     <span class="k">case</span> <span class="n">DownloadStatus</span><span class="o">.</span><span class="na">fetchingDownload</span><span class="o">:</span>
       <span class="c1">// do nothing.</span>
       <span class="k">break</span><span class="o">;</span>
     <span class="k">case</span> <span class="n">DownloadStatus</span><span class="o">.</span><span class="na">downloading</span><span class="o">:</span>
       <span class="n">widget</span><span class="o">.</span><span class="na">onCancel</span><span class="o">();</span>
       <span class="k">break</span><span class="o">;</span>
     <span class="k">case</span> <span class="n">DownloadStatus</span><span class="o">.</span><span class="na">downloaded</span><span class="o">:</span>
       <span class="n">widget</span><span class="o">.</span><span class="na">onOpen</span><span class="o">();</span>
       <span class="k">break</span><span class="o">;</span>
   <span class="o">}</span>
 <span class="o">}</span>

 <span class="nd">@override</span>
 <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
   <span class="k">return</span> <span class="n">GestureDetector</span><span class="o">(</span>
     <span class="nl">onTap:</span> <span class="n">_onPressed</span><span class="o">,</span>
     <span class="nl">child:</span> <span class="n">Stack</span><span class="o">(</span>
       <span class="nl">children:</span> <span class="o">[</span>
         <span class="n">_buildButtonShape</span><span class="o">(</span>
           <span class="nl">child:</span> <span class="n">_buildText</span><span class="o">(),</span>
         <span class="o">),</span>
         <span class="n">_buildDownloadingProgress</span><span class="o">(),</span>
       <span class="o">],</span>
     <span class="o">),</span>
   <span class="o">);</span>
 <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Congratulations! You have a button that changes its display
depending on which phase the button is in: not downloaded,
fetching download, downloading, and downloaded.
Now, the user can tap to start a download, tap to cancel an 
in-progress download, and tap to open a completed download.</p>

<h2 id="interactive-example">
<a class="anchor" href="#interactive-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Interactive example</h2>

<p>Run the app:</p>

<ul>
  <li>Click the <strong>GET</strong> button to kick off a
simulated download.</li>
  <li>The button changes to a progress indicator
to simulate an in-progress download.</li>
  <li>When the simulated download is complete, the
button transitions to <strong>OPEN</strong>, to indicate
that the app is ready for the user
to open the downloaded asset.</li>
</ul>

<!--skip-->
<pre><code class="language-run-dartpad:theme-light:mode-flutter:run-true:width-100%:height-600px:split-60:ga_id-interactive_example:null_safety-true">import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';

void main() {
  runApp(MaterialApp(
    home: const ExampleCupertinoDownloadButton(),
    debugShowCheckedModeBanner: false,
  ));
}

@immutable
class ExampleCupertinoDownloadButton extends StatefulWidget {
  const ExampleCupertinoDownloadButton({Key? key}) : super(key: key);

  @override
  _ExampleCupertinoDownloadButtonState createState() =&gt;
      _ExampleCupertinoDownloadButtonState();
}

class _ExampleCupertinoDownloadButtonState
    extends State&lt;ExampleCupertinoDownloadButton&gt; {
  late final List&lt;DownloadController&gt; _downloadControllers;

  @override
  void initState() {
    super.initState();
    _downloadControllers = List&lt;DownloadController&gt;.generate(
      20,
      (index) =&gt; SimulatedDownloadController(onOpenDownload: () {
        _openDownload(index);
      }),
    );
  }

  void _openDownload(int index) {
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(
        content: Text('Open App ${index + 1}'),
      ),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Apps')),
      body: _buildList(),
    );
  }

  Widget _buildList() {
    return ListView.separated(
      itemCount: _downloadControllers.length,
      separatorBuilder: (context, index) =&gt; const Divider(),
      itemBuilder: _buildListItem,
    );
  }

  Widget _buildListItem(BuildContext context, int index) {
    final theme = Theme.of(context);
    final downloadController = _downloadControllers[index];
    return ListTile(
      leading: const DemoAppIcon(),
      title: Text(
        'App ${index + 1}',
        overflow: TextOverflow.ellipsis,
        style: theme.textTheme.headline6,
      ),
      subtitle: Text(
        'Lorem ipsum dolor #${index + 1}',
        overflow: TextOverflow.ellipsis,
        style: theme.textTheme.caption,
      ),
      trailing: SizedBox(
        width: 96.0,
        child: AnimatedBuilder(
          animation: downloadController,
          builder: (context, child) {
            return DownloadButton(
              status: downloadController.downloadStatus,
              downloadProgress: downloadController.progress,
              onDownload: downloadController.startDownload,
              onCancel: downloadController.stopDownload,
              onOpen: downloadController.openDownload,
            );
          },
        ),
      ),
    );
  }
}

@immutable
class DemoAppIcon extends StatelessWidget {
  const DemoAppIcon({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return const AspectRatio(
      aspectRatio: 1.0,
      child: FittedBox(
        child: SizedBox(
          width: 80.0,
          height: 80.0,
          child: DecoratedBox(
            decoration: BoxDecoration(
              gradient: LinearGradient(
                colors: [Colors.red, Colors.blue],
              ),
              borderRadius: BorderRadius.all(Radius.circular(20.0)),
            ),
            child: Center(
              child: Icon(
                Icons.ac_unit,
                color: Colors.white,
                size: 40.0,
              ),
            ),
          ),
        ),
      ),
    );
  }
}

enum DownloadStatus {
  notDownloaded,
  fetchingDownload,
  downloading,
  downloaded,
}

abstract class DownloadController implements ChangeNotifier {
  DownloadStatus get downloadStatus;
  double get progress;

  void startDownload();
  void stopDownload();
  void openDownload();
}

class SimulatedDownloadController extends DownloadController
    with ChangeNotifier {
  SimulatedDownloadController({
    DownloadStatus downloadStatus = DownloadStatus.notDownloaded,
    double progress = 0.0,
    required VoidCallback onOpenDownload,
  })   : _downloadStatus = downloadStatus,
        _progress = progress,
        _onOpenDownload = onOpenDownload;

  DownloadStatus _downloadStatus;
  @override
  DownloadStatus get downloadStatus =&gt; _downloadStatus;

  double _progress;
  @override
  double get progress =&gt; _progress;

  final VoidCallback _onOpenDownload;

  bool _isDownloading = false;

  @override
  void startDownload() {
    if (downloadStatus == DownloadStatus.notDownloaded) {
      _doSimulatedDownload();
    }
  }

  @override
  void stopDownload() {
    if (_isDownloading) {
      _isDownloading = false;
      _downloadStatus = DownloadStatus.notDownloaded;
      _progress = 0.0;
      notifyListeners();
    }
  }

  @override
  void openDownload() {
    if (downloadStatus == DownloadStatus.downloaded) {
      _onOpenDownload();
    }
  }

  Future&lt;void&gt; _doSimulatedDownload() async {
    _isDownloading = true;
    _downloadStatus = DownloadStatus.fetchingDownload;
    notifyListeners();

    // Wait a second to simulate fetch time.
    await Future&lt;void&gt;.delayed(const Duration(seconds: 1));

    // If the user chose to cancel the download, stop the simulation.
    if (!_isDownloading) {
      return;
    }

    // Shift to the downloading phase.
    _downloadStatus = DownloadStatus.downloading;
    notifyListeners();

    const downloadProgressStops = [0.0, 0.15, 0.45, 0.80, 1.0];
    for (final stop in downloadProgressStops) {
      // Wait a second to simulate varying download speeds.
      await Future&lt;void&gt;.delayed(const Duration(seconds: 1));

      // If the user chose to cancel the download, stop the simulation.
      if (!_isDownloading) {
        return;
      }

      // Update the download progress.
      _progress = stop;
      notifyListeners();
    }

    // Wait a second to simulate a final delay.
    await Future&lt;void&gt;.delayed(const Duration(seconds: 1));

    // If the user chose to cancel the download, stop the simulation.
    if (!_isDownloading) {
      return;
    }

    // Shift to the downloaded state, completing the simulation.
    _downloadStatus = DownloadStatus.downloaded;
    _isDownloading = false;
    notifyListeners();
  }
}

@immutable
class DownloadButton extends StatelessWidget {
  const DownloadButton({
    Key? key,
    required this.status,
    this.downloadProgress = 0.0,
    required this.onDownload,
    required this.onCancel,
    required this.onOpen,
    this.transitionDuration = const Duration(milliseconds: 500),
  }) : super(key: key);

  final DownloadStatus status;
  final double downloadProgress;
  final VoidCallback onDownload;
  final VoidCallback onCancel;
  final VoidCallback onOpen;
  final Duration transitionDuration;

  bool get _isDownloading =&gt; status == DownloadStatus.downloading;

  bool get _isFetching =&gt; status == DownloadStatus.fetchingDownload;

  bool get _isDownloaded =&gt; status == DownloadStatus.downloaded;

  void _onPressed() {
    switch (status) {
      case DownloadStatus.notDownloaded:
        onDownload();
        break;
      case DownloadStatus.fetchingDownload:
        // do nothing.
        break;
      case DownloadStatus.downloading:
        onCancel();
        break;
      case DownloadStatus.downloaded:
        onOpen();
        break;
    }
  }

  @override
  Widget build(BuildContext context) {
    return GestureDetector(
      onTap: _onPressed,
      child: Stack(
        children: [
          _buildButtonShape(
            child: _buildText(context),
          ),
          _buildDownloadingProgress(),
        ],
      ),
    );
  }

  Widget _buildButtonShape({
    required Widget child,
  }) {
    return AnimatedContainer(
      duration: transitionDuration,
      curve: Curves.ease,
      width: double.infinity,
      decoration: _isDownloading || _isFetching
          ? ShapeDecoration(
              shape: const CircleBorder(),
              color: Colors.white.withOpacity(0.0),
            )
          : const ShapeDecoration(
              shape: StadiumBorder(),
              color: CupertinoColors.lightBackgroundGray,
            ),
      child: child,
    );
  }

  Widget _buildText(BuildContext context) {
    final text = _isDownloaded ? 'OPEN' : 'GET';
    final opacity = _isDownloading || _isFetching ? 0.0 : 1.0;

    return Padding(
      padding: const EdgeInsets.symmetric(vertical: 6),
      child: AnimatedOpacity(
        duration: transitionDuration,
        opacity: opacity,
        curve: Curves.ease,
        child: Text(
          text,
          textAlign: TextAlign.center,
          style: Theme.of(context).textTheme.button?.copyWith(
                fontWeight: FontWeight.bold,
                color: CupertinoColors.activeBlue,
              ),
        ),
      ),
    );
  }

  Widget _buildDownloadingProgress() {
    return Positioned.fill(
      child: AnimatedOpacity(
        duration: transitionDuration,
        opacity: _isDownloading || _isFetching ? 1.0 : 0.0,
        curve: Curves.ease,
        child: Stack(
          alignment: Alignment.center,
          children: [
            _buildProgressIndicator(),
            if (_isDownloading)
              const Icon(
                Icons.stop,
                size: 14.0,
                color: CupertinoColors.activeBlue,
              ),
          ],
        ),
      ),
    );
  }

  Widget _buildProgressIndicator() {
    return AspectRatio(
      aspectRatio: 1.0,
      child: TweenAnimationBuilder&lt;double&gt;(
        tween: Tween(begin: 0.0, end: downloadProgress),
        duration: const Duration(milliseconds: 200),
        builder: (context, progress, child) {
          return CircularProgressIndicator(
            backgroundColor: _isDownloading
                ? CupertinoColors.lightBackgroundGray
                : Colors.white.withOpacity(0.0),
            valueColor: AlwaysStoppedAnimation(_isFetching
                ? CupertinoColors.lightBackgroundGray
                : CupertinoColors.activeBlue),
            strokeWidth: 2.0,
            value: _isFetching ? null : progress,
          );
        },
      ),
    );
  }
}
</code></pre>

        <nav class="site-nextprev-nav">
    <ul>
      <li class="prev">
          <a href="/docs/cookbook/design/tabs">Work with tabs</a>
      </li>
      <li class="next">
          <a href="/docs/cookbook/effects/nested-nav">Create a nested navigation flow</a>
      </li>
      </ul>
  </nav>

      </div>
    </main>
  </div>
</div>


    <footer class="site-footer">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12 site-footer__wrapper">
        <div class="site-footer__logo">
          <img src="/images/flutter-mono-81x100.png" alt="Flutter Logo" width="81" height="100">
        </div>
        <div class="site-footer__content">
          <ul class="site-footer__link-list">
              <li><a href="https://groups.google.com/forum/#!forum/flutter-dev">flutter-dev@</a></li>
              <li><a href="/tos">terms</a></li>
              <li><a href="/brand">brand usage</a></li>
              <li><a href="/security">security</a></li>
              <li><a href="https://www.google.com/intl/en/policies/privacy">privacy</a></li>
              <li><a href="https://esflutter.dev/">español</a></li>
              <li><a href="https://flutter.cn" class="text-nowrap">社区中文资源</a></li> 
              <li><a href="https://flutter-ko.dev/" class="text-nowrap">한국어</a></li>
              <li><a href="https://blog.google/inside-google/company-announcements/standing-with-black-community">We stand in solidarity with the Black community. Black Lives Matter.</a></li>
          </ul>

          <p class="licenses">
            Except as otherwise noted,
            this work is licensed under a
            <a rel="license" href="https://creativecommons.org/licenses/by/4.0">Creative
            Commons Attribution 4.0 International License</a>,
            and code samples are licensed under the BSD License.
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

    
    <script async="" defer="" src="//survey.g.doubleclick.net/async_survey?site=at3ul57xpub2vk3oxt2ytw365i"></script>
  </body>
</html>
